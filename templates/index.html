<html>
    <head>
        <title>Flask Ajax</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    </head>
    <body>

    
<section class="newsletter">
<div class="container">
<div class="row">
<div class="col-md-12">
    <div class="content">
        <div class="title">BIDS-VALIDATOR-A</div>
  <div class="subtitle"> Smart tool for open-sciences</div>
    <div class="form-group files color">
          <input id="picker" class="form-control" " type="file" webkitdirectory multiple />

          <span>
              <button  class="btn" id="demo_btn" >Scan Now</button>
         </span>

    </div>
    
            <div id="data"></div>             
              <div id="list"></div>
</div>
</div>
</div>
</section>


<script>
        let picker = document.getElementById('picker')
            var a=[]
            picker.addEventListener('change', (event) => {
              let files = event.target.files
              let list = document.getElementById('list')
             // list.innerHTML = 'You selected these files:'
                var arr =[];
              for (let i = 0; i < files.length; i++) {
                let file = files[i]
                
               // list.innerHTML += '<br>' + file.webkitRelativePath
                    arr.push(file.webkitRelativePath)
               }
             a = arr
                   // list.innerHTML ='Coordinates string: '+a
                

            })

            $(document).ready(function () {
                $("#demo_btn").on("click", function() {
                    var js_data = JSON.stringify(a);
                    $.ajax({                        
                        url: '/end_stu_live_session',
                        type : 'post',
                        contentType: 'application/json',
                        dataType : 'json',
                        data : js_data
                    }).done(function(result) {
                        console.log(result);
                        $("#data").html(result);
                    }).fail(function(jqXHR, textStatus, errorThrown) {
                        console.log("fail: ",textStatus, errorThrown);
                    });
                });
            });
        </script>     
        <script>
    
    
    $(document).ready(function(){
  var mouseX, mouseY;
  var ww = $( window ).width();
  var wh = $( window ).height();
  var traX, traY;
  $(document).mousemove(function(e){
    mouseX = e.pageX;
    mouseY = e.pageY;
    traX = ((4 * mouseX) / 570) + 40;
    traY = ((4 * mouseY) / 570) + 50;
    console.log(traX);
    $(".title").css({"background-position": traX + "%" + traY + "%"});
  });
});

</script>  
    </body>
</html>